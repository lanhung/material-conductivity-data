# ParquetViewer 使用说明与数据字段文档

## 1. 使用 ParquetViewer 加载数据

### 1.1 下载软件

从 [https://github.com/mukunku/ParquetViewer/releases](https://github.com/mukunku/ParquetViewer/releases) 下载 ParquetViewer。

![parquetViewer_download.png](images/parquetViewer_download.png)

### 1.2 启动软件

双击下载的可执行文件，启动后界面如下：

![parquetView_UI.png](images/parquetView_UI.png)

### 1.3 加载数据文件

- 方法一：将数据文件 `xxxx.parquet` 拖入软件界面；
- 方法二：点击菜单栏 `File` → `Open Folder`，选择包含所有 `.parquet` 文件的文件夹；
- 然后点击 `Done` 加载数据。

![drag_data_to_parquetView.png](images/drag_data_to_parquetView.png)  
![data_view.png](images/data_view.png)

---

## 2. 数据字段说明

| 字段名            | 类型     | 含义               | 说明                                                                 | 示例值              | 取值范围 / 可选值                                                |
|-------------------|----------|--------------------|----------------------------------------------------------------------|---------------------|-------------------------------------------------------------------|
| `id`              | Long     | 样本编号           | 唯一标识符，从 0 开始自增                                           | 42                  | 0 ~ numRows - 1                                                  |
| `dopant_elements` | String   | 掺杂元素及浓度     | JSON 字符串，键为元素，值为摩尔浓度（1~10 mol%）                    | {"Y":5,"Sc":3}      | 元素从 Y, Sc, Yb, Dy, Bi 中选 1~3 个，浓度范围为 1~10           |
| `sintering_temp`  | Integer  | 烧结温度（℃）      | 烧结过程中使用的温度                                                | 1350                | 1200 ~ 1600                                                     |
| `sintering_time`  | Integer  | 烧结时间（小时）   | 高温烧结持续时间                                                    | 8                   | 1 ~ 10                                                          |
| `test_temp`       | Integer  | 测试温度（℃）      | 测量电导率的温度                                                    | 800                 | 500 ~ 1000                                                      |
| `conductivity`    | String   | 电导率（S/cm）     | 高温下氧离子电导率，高精度字符串形式                               | 0.001345678912345   | 约 1e-6 ~ 0.009                                                  |
| `crystal_phase`   | String   | 晶体相结构         | 烧结后材料的晶体相类型                                              | "c+t"               | "c", "t", "c+t", "m+t"                                          |
| `method`          | String   | 成型方法           | 材料的压制或沉积方式                                                | "热压"              | "干压", "热压", "等静压", "流延", "脉冲激光沉积"               |
| `material_source` | String   | 材料来源           | 原料来源，可为实验室自制或商业购入                                  | "实验室自制"         | "实验室自制", "商品化"                                          |

---

## 3. 数据增强策略

为提升数据规模、增加样本多样性，并增强模型对复杂工艺条件的泛化能力，设计了基于领域知识的模拟增强流程。增强样本保留原始字段结构，保证统计合理性与物理可解释性。

### 3.1 增强字段生成逻辑

| 字段名            | 增强策略说明                                                                 |
|-------------------|------------------------------------------------------------------------------|
| **`dopant_elements`** | - 从 Y, Sc, Yb, Dy, Bi 中随机选 1–3 个元素；<br> - 每元素赋 1–10 mol% 整数浓度；<br> - 以 JSON 字符串格式表达，如 `{"Y":6,"Sc":3}` |
| **`sintering_temp`**  | - 1200–1600°C 范围内均匀采样整数值                                          |
| **`sintering_time`**  | - 1–10 小时之间生成整数值                                                  |
| **`test_temp`**       | - 500–1000°C 范围内均匀选取                                                 |
| **`conductivity`**    | - 基础值：$10^{-3}$ S/cm；<br> - 掺杂总浓度 × 1e-4；<br> - 温度增益：$(T - 500) \times 1e-5$；<br> - 高斯扰动（$\sigma = 1e-4$）；<br> - 截断下限 $10^{-6}$；<br> - 输出格式为 15 位有效数字的字符串 |
| **`crystal_phase`**   | - 从 "c", "t", "c+t", "m+t" 中等概率选取                                   |
| **`method`**          | - 从 5 种成型方式中等概率选取                                              |
| **`material_source`** | - 在 "实验室自制" 与 "商品化" 之间随机选取                                 |

> 电导率计算公式如下：  
> \[
> \text{conductivity} = \max\left(10^{-6}, 10^{-3} + \text{dopant\_sum} \times 10^{-4} + (\text{test\_temp} - 500) \times 10^{-5} + \epsilon \right)
> \]  
> 其中 $\epsilon$ 为服从均值为 0、标准差为 $1\times10^{-4}$ 的高斯噪声。

---

### 3.2 样本生成流程

1. 随机确定掺杂元素组合及浓度；
2. 设定烧结温度、烧结时间和测试温度；
3. 基于物理启发规则计算电导率；
4. 随机选取晶体结构、成型方式及材料来源；
5. 封装为结构化数据条目并写入数据集。

---

### 3.3 增强数据的优势

| 特征           | 描述                                                                 |
|----------------|----------------------------------------------------------------------|
| **物理合理性**   | 全字段值位于工程常规范围内，符合实验认知                             |
| **结构一致性**   | 与原始实验数据字段结构一致，可直接拼接模型训练数据                  |
| **样本多样性**   | 多种组合、随机策略扩展参数空间                                       |
| **可重复生成**   | 固定随机种子，增强结果可控                                           |
| **应用广泛**     | 可用于回归建模、特征工程、泛化能力评估、数据拟合等机器学习场景       |

---
